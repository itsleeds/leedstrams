<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tools for Working with Leeds Historic Tram Map Tiles • leedstrams</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Working with Leeds Historic Tram Map Tiles">
<meta name="description" content="Helper functions to work with National Library of Scotland (NLS) OS town plan tile pyramids, including XYZ tile maths, downloading, and creating stitched mosaics with terra.">
<meta property="og:description" content="Helper functions to work with National Library of Scotland (NLS) OS town plan tile pyramids, including XYZ tile maths, downloading, and creating stitched mosaics with terra.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">leedstrams</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/nls-tiles.html">NLS town-plan tiles</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="leedstrams">
<code>leedstrams</code><a class="anchor" aria-label="anchor" href="#leedstrams"></a>
</h1></div>
<p>This repository is an R package that provides helpers for working with the National Library of Scotland (NLS) OS town-plan <em>XYZ tile pyramids</em>, used for the Leeds tram mapping case study.</p>
<div class="section level2">
<h2 id="install">Install<a class="anchor" aria-label="anchor" href="#install"></a>
</h2>
</div>
<div class="section level2">
<h2 id="core-package-functions">Core package functions<a class="anchor" aria-label="anchor" href="#core-package-functions"></a>
</h2>
<p>Tile maths:</p>
<ul>
<li>
<code><a href="reference/tile_coords_to_xy.html">tile_coords_to_xy()</a></code> (lon/lat -&gt; x/y)</li>
<li>
<code><a href="reference/tile_xy_to_lonlat.html">tile_xy_to_lonlat()</a></code> (x/y -&gt; lon/lat)</li>
<li>
<code><a href="reference/tile_webmerc_extent.html">tile_webmerc_extent()</a></code> (tile -&gt; EPSG:3857 extent)</li>
</ul>
<p>NLS tile access:</p>
<ul>
<li>
<code><a href="reference/nls_tile_rast_zxy.html">nls_tile_rast_zxy()</a></code> (read a z/x/y tile into a georeferenced <code>terra</code> raster)</li>
<li>
<code><a href="reference/nls_tile_rast_lonlat.html">nls_tile_rast_lonlat()</a></code> (read the tile containing a lon/lat)</li>
</ul>
<p>Tile selection:</p>
<ul>
<li>
<code><a href="reference/nls_tiles_near_lonlat.html">nls_tiles_near_lonlat()</a></code> (compact set of nearby tiles, useful for small mosaics)</li>
<li>
<code><a href="reference/nls_tiles_for_polygon.html">nls_tiles_for_polygon()</a></code> (tile indices intersecting an <code>sf</code> polygon)</li>
</ul>
</div>
<div class="section level2">
<h2 id="example-small-mosaic-near-hyde-park">Example: small mosaic near Hyde Park<a class="anchor" aria-label="anchor" href="#example-small-mosaic-near-hyde-park"></a>
</h2>
</div>
<div class="section level2">
<h2 id="downloadingstitching-a-larger-leeds-mosaic">Downloading/stitching a larger Leeds mosaic<a class="anchor" aria-label="anchor" href="#downloadingstitching-a-larger-leeds-mosaic"></a>
</h2>
<p>For a reproducible end-to-end download/stitch workflow (including chunked merging), see the standalone script:</p>
<ul>
<li><code>scripts/download_leeds_nls_tiles.R</code></li>
</ul>
<p>That script caches downloaded tiles under <code>.cache/</code> and writes <code>tiles_merged_leeds.tif</code> (these outputs are gitignored).</p>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<ul>
<li>User vignette: <code>vignettes/nls-tiles.Rmd</code>
</li>
<li>pkgdown site: <a href="https://itsleeds.github.io/leedstrams/" class="uri">https://itsleeds.github.io/leedstrams/</a>
</li>
<li>Developer-only one-off checks: <code>dev/tests.Rmd</code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h2>
<p>Keep remote tile downloads limited when rendering documentation, and prefer running larger downloads via the script above.</p>
<div class="section level3">
<h3 id="plan">Plan<a class="anchor" aria-label="anchor" href="#plan"></a>
</h3>
<ul>
<li>Download the town map dataset from Scottish Library: <a href="https://maps.nls.uk/os/townplans-england/leeds2.html" class="external-link uri">https://maps.nls.uk/os/townplans-england/leeds2.html</a>
</li>
<li>Digitise the tramway centerlines from there</li>
<li>Digitise the tram network from Alex’s image data</li>
<li>Combine both datasets into a single tramway network</li>
<li>Bonus: track lines</li>
<li>Comparing with OSM</li>
</ul>
</div>
<div class="section level3">
<h3 id="rail-map-online-data">Rail Map online data<a class="anchor" aria-label="anchor" href="#rail-map-online-data"></a>
</h3>
<p><img src="images/paste-2.png"></p>
<p>See png-to-geojson.py</p>
</div>
<div class="section level3">
<h3 id="town-plan-data">Town plan data<a class="anchor" aria-label="anchor" href="#town-plan-data"></a>
</h3>
<p>Individual tiles can be accessed from URLs such as <code>https://mapseries-tilesets.s3.amazonaws.com/os/town-england/North/19/259898/168840.png</code>.</p>
<p>This is a raster tile pyramid: zoom level 19, tile coordinates 259898, 168840.</p>
<p>The general pattern is: <code>https://mapseries-tilesets.s3.amazonaws.com/os/town-england/North/{z}/{x}/{y}.png</code></p>
<p>You can copy-paste that URL into QGIS ‘XYZ Tiles’ to access the tiles directly as shown below:</p>
<p><img src="images/paste-1.png"></p>
<!-- You can download the tiles using R as follows: -->
<p>You can also use the <code>ceramic</code> package to download tiles:</p>
</div>
<div class="section level3">
<h3 id="extracting-tram-network-from-image">Extracting tram network from image<a class="anchor" aria-label="anchor" href="#extracting-tram-network-from-image"></a>
</h3>
<p>The following Python code processes the image <code>images/paste-2.png</code> to extract the Leeds tram network lines (purple), skeletonizes them, and converts the result to LineStrings.</p>
</div>
</div>
<div class="section level2">
<h2 id="research">Research<a class="anchor" aria-label="anchor" href="#research"></a>
</h2>
<ul>
<li>Compare with historic economic and usage data</li>
<li>…</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing leedstrams</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robin Lovelace <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Lovelace.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
